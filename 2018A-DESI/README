This is a check list for creating DESI masks for 2018A February observation.

/---- Contents
- Organization: A guide to how the directory is organized.
- Binospec dimensions: Describe dimensions of the binospeck mask
- Fields/Masks/Data: Describe Fields and the description of masks to be used.
- Other data: Describe other data used and stored in ./data/
- Generate input catalogs: Describe how the input catalogs were compiled.
- Results: Describe the results of masks designed using the above strategy.





/---- Organization
./data/ 	All original data files are stored in here.
	./data/derived/		Any derived data files are stored in here.
./figure/		All figures generated are stored in here.
./input-catalogs/ 		These are *.txt input catalogs to BinoMask.
./output-catalogs/		These are *.json output files from BinoMask.




/---- Binospec dimensions:
- Mask dimension (including gap): 17.33' x 15'
- One-arm mask dimension: 8' x 15' 
- Area covered by a mask (including gap): 0.0722 sq. deg.
	- 5K/deg^2 --> 361 targets
- Area covered by a mask (exluding the gap): 0.0667 sq. deg. 
	- 5K/deg^2 --> 333 targets




/---- Fields/Masks/Data
Specs
- Grating: 600 lines/mm, 8750A and 6450A
- 2 x 15 mins per grating configuration (one hour with overhead)
- Slit width/length: 1" x 6"

COSMOS
- Number of masks: 2
- Legacy Survey/DR: 3
- Constraints: Based on the region that overlaps with Christophe's geometry.
- Data:
	- List_RF_Cosmos.fits (From Christophe)
	- ./data/DR3/COSMOS/ Tractor files for the same region.
		- Scripts used: 
			- generate-tractor-download-script-COSMOS.py
			- tractor-download-COSMOS.sh
- Notes: Because the Fields is void of bright stars and is small, rather than creating a small catalog for each mask, I generate targets for the whole field and simply select two non-overlapping fields on BinoMask.

HSC (16h+44)
- Number of masks: 6
- Legacy Survey/DR: 6
- Constraints: Based on the region that overlaps with Christophe's geometry.
- Field centers:
ra_cs = [244.1, 245, 246, 244.1, 244.75, 245]
dec_cs = [43.5, 43.5, 43.5, 44., 44., 42.75]
- Data:
	- From Christophe:
		- List_RF_HSC_dr6.fits				
	- ./data/DR6/HSC-{1..6}
		- Scripts used: 
			- HSC-mv-script.py: Generate script used to move files within NERSC. 
			- HSC-{1..6}-move.sh: Same function as aboev.

DR6 (7-8h+33)
- Number of masks: 6
- Legacy Survey/DR: 6
- Constraints: 
	- Based on the region that overlaps with Christophe's geometry.
	- Also, we want as early as we can in the NGC.
	- Notes from Daniel: I'm trying to give priority to the BASS/DECaLS overlap region, but if that's really not possible, then we could go further north.  
- Field centers:
ra_cs = [115.75, 115.75, 117, 118, 119, 119]
dec_cs = [37, 35, 35, 35.5, 35, 33]	
- Data:
	- From Christophe:
		- List_RF_Stripe_ra_32_40_dec_100_270_dr6.fits
	- ./data/DR6/DR6-{1..6}
		- Scripts used:
			- DR6-mv-script.py: Generate script used to move files within NERSC. 
			- DR6-{1..6}-move.sh: Same function as aboev.

RADEC plots of COSMOS, HSC, and DR6 Fields
- Notes: RA/DEC of RF targets, SDSS stars, and SDSS galaxies. Tycho-2 masking is applied. Used to pick fields for observation. Show the fields that were picked for observation.
- Script used: plot-RADEC-RF-stars-gals.py
- Products:
	- RADEC-HSC.png
	- RADEC-DR6.png
	- RADEC-COSMOS.png


2017C SGC set

2017C NGC set



/---- Other data
SDSS Standard stars/galaxies: 
- Notes: These files were obtained from Daniel and cover the entire necessary ranges.
boss.r105_150.dp30_p45.txt		boss.r240_250.dp40_p45.txt		standard_bino.r110_170.dm10_p35.txt
boss.r110_170.dm10_p35.txt		standard_bino.r105_150.dp30_p45.txt	standard_bino.r240_250.dp40_p45.txt

DR3/6 bricks files: 
- Notes: These files tell which files should be downloaded.
survey-bricks-dr3.fits 



/---- Generate input catalogs
General plan: For each Field
- Combine all the Tractor files in the region. 
- Apply allmasks, invar > 0, and Tycho-2 mask.
- Create a bit vector.
- Apply NDM selections. (Make color term corrections for DR4/6. Apply to the intrinsic model before addition of noise.)
- Cross-match RF targets onto the combined and trimmed catalog.
- Apply FDR cut.
- Import SDSS stars and galaxies. Make astrometric correction by cross-matching.
- Save bit numbers
	- 1: SDSS stars
	- 2: SDSS galaxies	
    - 3: FDR cut as reported in FDR.
	- 4: NDM fiducial. Ndesired = 3000
	- 6: NDM fiducial but U_Gold = 2. Ndesired = 3000
	- 7: NDM fiducial but U_NoZ = 1. Ndesired = 3000
	- 8: RF1, RF tuned for 2400 deg
	- 9: RF2, RF tuned for 3000 deg
	- 10: RF3, RF tuned for 3000 deg with an additional gmag cut.
- Create input catalogs with the following: 
	- Name, ra, dec, gmag, priority, type
	- Dense set of skies as the last priority.
	- Priority 1: SDSS stars
	- Priority 2: SDSS galaxies
	- Priority 3: All targets (name = bit number)
	- Priority 4: Skies





/---- Results
COSMOS
- Eisenstein-COSMOS-1
- Eisenstein-COSMOS-2	

HSC

DR6